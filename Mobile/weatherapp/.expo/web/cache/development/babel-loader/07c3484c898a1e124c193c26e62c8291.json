{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DeckSwiper = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _jsxFileName = \"src/basic/DeckSwiper.js\";\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _clamp = require(\"clamp\");\n\nvar _clamp2 = _interopRequireDefault(_clamp);\n\nvar _nativeBaseShoutemTheme = require(\"native-base-shoutem-theme\");\n\nvar _mapPropsToStyleNames = require(\"../Utils/mapPropsToStyleNames\");\n\nvar _mapPropsToStyleNames2 = _interopRequireDefault(_mapPropsToStyleNames);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar SWIPE_THRESHOLD = 120;\n\nvar DeckSwiper = function (_Component) {\n  _inherits(DeckSwiper, _Component);\n\n  function DeckSwiper(props) {\n    _classCallCheck(this, DeckSwiper);\n\n    var _this = _possibleConstructorReturn(this, (DeckSwiper.__proto__ || Object.getPrototypeOf(DeckSwiper)).call(this, props));\n\n    _this.state = {\n      pan: new _reactNative.Animated.ValueXY(),\n      pan2: new _reactNative.Animated.ValueXY(),\n      enter: new _reactNative.Animated.Value(0.8),\n      selectedItem: _this.props.dataSource[0],\n      selectedItem2: _this.props.dataSource[1],\n      card1Top: true,\n      card2Top: false,\n      fadeAnim: new _reactNative.Animated.Value(0.8),\n      looping: _this.props.looping || true,\n      disabled: _this.props.dataSource.length === 0,\n      lastCard: _this.props.dataSource.length === 1\n    };\n    return _this;\n  }\n\n  _createClass(DeckSwiper, [{\n    key: \"getInitialStyle\",\n    value: function getInitialStyle() {\n      return {\n        topCard: {\n          position: \"absolute\",\n          top: 0,\n          right: 0,\n          left: 0\n        }\n      };\n    }\n  }, {\n    key: \"findNextIndexes\",\n    value: function findNextIndexes(currentIndex) {\n      var newIdx = currentIndex + 1;\n      var newIdx2 = currentIndex + 2;\n\n      if (newIdx2 > this.props.dataSource.length - 1 && newIdx === this.props.dataSource.length - 1) {\n        return [newIdx, 0];\n      } else if (newIdx > this.props.dataSource.length - 1) {\n        return [0, 1];\n      } else {\n        return [newIdx, newIdx2];\n      }\n    }\n  }, {\n    key: \"selectNext\",\n    value: function selectNext() {\n      var _this2 = this;\n\n      var dataSource = this.props.dataSource;\n      var currentIndex = dataSource.indexOf(this.state.selectedItem);\n\n      if (!this.state.looping) {\n        if (currentIndex === dataSource.length - 1) {\n          return this.setState({\n            disabled: true\n          });\n        } else if (currentIndex === dataSource.length - 2) {\n          return setTimeout(function () {\n            _this2.setState({\n              selectedItem: dataSource[currentIndex + 1]\n            });\n\n            setTimeout(function () {\n              _this2.setState({\n                lastCard: true\n              });\n            }, 350);\n          }, 50);\n        }\n      }\n\n      var nextIndexes = this.findNextIndexes(currentIndex);\n      setTimeout(function () {\n        _this2.setState({\n          selectedItem: _this2.props.dataSource[nextIndexes[0]]\n        });\n\n        setTimeout(function () {\n          _this2.setState({\n            selectedItem2: _this2.props.dataSource[nextIndexes[1]]\n          });\n        }, 350);\n      }, 50);\n    }\n  }, {\n    key: \"swipeRight\",\n    value: function swipeRight() {\n      var _this3 = this;\n\n      if (this.props.onSwiping) this.props.onSwiping(\"right\");\n      setTimeout(function () {\n        _reactNative.Animated.timing(_this3.state.fadeAnim, {\n          toValue: 1\n        }).start();\n\n        _reactNative.Animated.spring(_this3.state.enter, {\n          toValue: 1,\n          friction: 7\n        }).start();\n\n        _this3.selectNext();\n\n        _reactNative.Animated.decay(_this3.state.pan, {\n          velocity: {\n            x: 8,\n            y: 1\n          },\n          deceleration: 0.98\n        }).start(_this3._resetState.bind(_this3));\n      }, 300);\n    }\n  }, {\n    key: \"swipeLeft\",\n    value: function swipeLeft() {\n      var _this4 = this;\n\n      if (this.props.onSwiping) this.props.onSwiping(\"left\");\n      setTimeout(function () {\n        _reactNative.Animated.timing(_this4.state.fadeAnim, {\n          toValue: 1\n        }).start();\n\n        _reactNative.Animated.spring(_this4.state.enter, {\n          toValue: 1,\n          friction: 7\n        }).start();\n\n        _this4.selectNext();\n\n        _reactNative.Animated.decay(_this4.state.pan, {\n          velocity: {\n            x: -8,\n            y: 1\n          },\n          deceleration: 0.98\n        }).start(_this4._resetState.bind(_this4));\n      }, 300);\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this5 = this;\n\n      this._panResponder = _reactNative.PanResponder.create({\n        onMoveShouldSetResponderCapture: function onMoveShouldSetResponderCapture() {\n          return true;\n        },\n        onMoveShouldSetPanResponderCapture: function onMoveShouldSetPanResponderCapture(evt, gestureState) {\n          return Math.abs(gestureState.dx) > 5;\n        },\n        onPanResponderGrant: function onPanResponderGrant(e, gestureState) {\n          _this5.state.pan.setOffset({\n            x: _this5.state.pan.x._value,\n            y: _this5.state.pan.y._value\n          });\n\n          _this5.state.pan.setValue({\n            x: 0,\n            y: 0\n          });\n        },\n        onPanResponderMove: function onPanResponderMove(e, gestureState) {\n          if (gestureState.dx > 20) {\n            if (_this5.props.onSwiping) _this5.props.onSwiping(\"right\", gestureState.dx);\n          } else if (gestureState.dx < -20) {\n            if (_this5.props.onSwiping) _this5.props.onSwiping(\"left\", gestureState.dx);\n          }\n\n          var val = Math.abs(gestureState.dx * 0.0013);\n          var opa = Math.abs(gestureState.dx * 0.0022);\n\n          if (val > 0.2) {\n            val = 0.2;\n          }\n\n          _reactNative.Animated.timing(_this5.state.fadeAnim, {\n            toValue: 0.8 + val\n          }).start();\n\n          _reactNative.Animated.spring(_this5.state.enter, {\n            toValue: 0.8 + val,\n            friction: 7\n          }).start();\n\n          _reactNative.Animated.event([null, {\n            dx: _this5.state.pan.x\n          }])(e, gestureState);\n        },\n        onPanResponderRelease: function onPanResponderRelease(e, _ref) {\n          var vx = _ref.vx,\n              vy = _ref.vy;\n          if (_this5.props.onSwiping) _this5.props.onSwiping(null);\n          var velocity;\n\n          if (vx >= 0) {\n            velocity = (0, _clamp2.default)(vx, 4.5, 10);\n          } else if (vx < 0) {\n            velocity = (0, _clamp2.default)(vx * -1, 4.5, 10) * -1;\n          }\n\n          if (Math.abs(_this5.state.pan.x._value) > SWIPE_THRESHOLD) {\n            if (velocity > 0) {\n              _this5.props.onSwipeRight ? _this5.props.onSwipeRight(_this5.state.selectedItem) : undefined;\n\n              _this5.selectNext();\n            } else {\n              _this5.props.onSwipeLeft ? _this5.props.onSwipeLeft(_this5.state.selectedItem) : undefined;\n\n              _this5.selectNext();\n            }\n\n            _reactNative.Animated.decay(_this5.state.pan, {\n              velocity: {\n                x: velocity,\n                y: vy\n              },\n              deceleration: 0.98\n            }).start(_this5._resetState.bind(_this5));\n          } else {\n            _reactNative.Animated.spring(_this5.state.pan, {\n              toValue: {\n                x: 0,\n                y: 0\n              },\n              friction: 4\n            }).start();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_resetState\",\n    value: function _resetState() {\n      this.state.pan.setValue({\n        x: 0,\n        y: 0\n      });\n      this.state.enter.setValue(0.8);\n      this.state.fadeAnim.setValue(0.8);\n      this.setState({\n        card1Top: !this.state.card1Top,\n        card2Top: !this.state.card2Top\n      });\n      if (this.props.onSwiping) this.props.onSwiping(null);\n    }\n  }, {\n    key: \"getCardStyles\",\n    value: function getCardStyles() {\n      var _state = this.state,\n          pan = _state.pan,\n          pan2 = _state.pan2,\n          enter = _state.enter;\n      var _ref2 = [pan.x, pan.y],\n          translateX = _ref2[0],\n          translateY = _ref2[1];\n      var rotate = pan.x.interpolate({\n        inputRange: [-700, 0, 700],\n        outputRange: [\"-10deg\", \"0deg\", \"10deg\"]\n      });\n      var opacity = pan.x.interpolate({\n        inputRange: [-320, 0, 320],\n        outputRange: [0.9, 1, 0.9]\n      });\n      var scale = enter;\n      var animatedCardStyles = {\n        transform: [{\n          translateX: translateX\n        }, {\n          translateY: translateY\n        }, {\n          rotate: rotate\n        }],\n        opacity: opacity\n      };\n      var animatedCardStyles2 = {\n        transform: [{\n          scale: scale\n        }]\n      };\n      return [animatedCardStyles, animatedCardStyles2];\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      if (this.state.disabled) {\n        return _react2.default.createElement(_reactNative.View, {\n          ref: function ref(c) {\n            return _this6._root = c;\n          },\n          style: {\n            position: \"relative\",\n            flexDirection: \"column\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 233\n          }\n        }, _react2.default.createElement(_reactNative.View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238\n          }\n        }, this.props.renderEmpty && this.props.renderEmpty()));\n      } else if (this.state.lastCard) {\n        return _react2.default.createElement(_reactNative.View, {\n          ref: function ref(c) {\n            return _this6._root = c;\n          },\n          style: {\n            position: \"relative\",\n            flexDirection: \"column\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 247\n          }\n        }, this.state.selectedItem === undefined ? _react2.default.createElement(_reactNative.View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252\n          }\n        }) : _react2.default.createElement(_reactNative.View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253\n          }\n        }, _react2.default.createElement(_reactNative.Animated.View, _extends({\n          style: [this.getCardStyles()[1], this.getInitialStyle().topCard, {\n            opacity: this.state.fadeAnim\n          }]\n        }, this._panResponder.panHandlers, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          }\n        }), this.props.renderEmpty && this.props.renderEmpty()), _react2.default.createElement(_reactNative.Animated.View, _extends({\n          style: [this.getCardStyles()[0], this.getInitialStyle().topCard]\n        }, this._panResponder.panHandlers, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          }\n        }), this.props.renderItem(this.state.selectedItem))));\n      } else {\n        return _react2.default.createElement(_reactNative.View, {\n          ref: function ref(c) {\n            return _this6._root = c;\n          },\n          style: {\n            position: \"relative\",\n            flexDirection: \"column\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          }\n        }, this.state.selectedItem === undefined ? _react2.default.createElement(_reactNative.View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          }\n        }) : _react2.default.createElement(_reactNative.View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          }\n        }, _react2.default.createElement(_reactNative.Animated.View, _extends({\n          style: [this.getCardStyles()[1], this.getInitialStyle().topCard, {\n            opacity: this.state.fadeAnim\n          }]\n        }, this._panResponder.panHandlers, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          }\n        }), this.props.renderBottom ? this.props.renderBottom(this.state.selectedItem2) : this.props.renderItem(this.state.selectedItem2)), _react2.default.createElement(_reactNative.Animated.View, _extends({\n          style: [this.getCardStyles()[0], this.getInitialStyle().topCard]\n        }, this._panResponder.panHandlers, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297\n          }\n        }), this.props.renderTop ? this.props.renderTop(this.state.selectedItem) : this.props.renderItem(this.state.selectedItem))));\n      }\n    }\n  }]);\n\n  return DeckSwiper;\n}(_react.Component);\n\nDeckSwiper.propTypes = _extends({}, _reactNative.ViewPropTypes, {\n  style: _react2.default.PropTypes.object,\n  dataSource: _react2.default.PropTypes.array\n});\nvar StyledDeckSwiper = (0, _nativeBaseShoutemTheme.connectStyle)(\"NativeBase.DeckSwiper\", {}, _mapPropsToStyleNames2.default)(DeckSwiper);\nexports.DeckSwiper = StyledDeckSwiper;","map":{"version":3,"sources":["../../../src/basic/DeckSwiper.js"],"names":["SWIPE_THRESHOLD","DeckSwiper","pan","pan2","enter","selectedItem","selectedItem2","card1Top","card2Top","fadeAnim","looping","disabled","lastCard","topCard","position","top","right","left","currentIndex","newIdx","newIdx2","dataSource","setTimeout","nextIndexes","toValue","friction","velocity","x","y","deceleration","onMoveShouldSetResponderCapture","onMoveShouldSetPanResponderCapture","Math","gestureState","onPanResponderGrant","onPanResponderMove","val","opa","dx","onPanResponderRelease","vx","vy","translateX","translateY","rotate","inputRange","outputRange","opacity","scale","animatedCardStyles","transform","animatedCardStyles2","flexDirection","style","StyledDeckSwiper"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { View, Animated, PanResponder, ViewPropTypes } from \"react-native\";\nimport clamp from \"clamp\";\nimport { connectStyle } from \"native-base-shoutem-theme\";\nimport mapPropsToStyleNames from \"../Utils/mapPropsToStyleNames\";\n\nconst SWIPE_THRESHOLD = 120;\n\nclass DeckSwiper extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pan: new Animated.ValueXY(),\n      pan2: new Animated.ValueXY(),\n      enter: new Animated.Value(0.8),\n      selectedItem: this.props.dataSource[0],\n      selectedItem2: this.props.dataSource[1],\n      card1Top: true,\n      card2Top: false,\n      fadeAnim: new Animated.Value(0.8),\n      looping: this.props.looping || true,\n      disabled: this.props.dataSource.length === 0,\n      lastCard: this.props.dataSource.length === 1\n    };\n  }\n\n  getInitialStyle() {\n    return {\n      topCard: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        left: 0\n      }\n    };\n  }\n\n  findNextIndexes(currentIndex) {\n    let newIdx = currentIndex + 1;\n    let newIdx2 = currentIndex + 2;\n\n    if (\n      newIdx2 > this.props.dataSource.length - 1 &&\n      newIdx === this.props.dataSource.length - 1\n    ) {\n      return [newIdx, 0];\n    } else if (newIdx > this.props.dataSource.length - 1) {\n      return [0, 1];\n    } else {\n      return [newIdx, newIdx2];\n    }\n  }\n\n  selectNext() {\n    const dataSource = this.props.dataSource;\n    let currentIndex = dataSource.indexOf(this.state.selectedItem);\n\n    // if not looping, check for these conditionals and if true return from selectNext()\n    if (!this.state.looping) {\n      // reached end -> only display static renderEmpty() -> no swiping\n      if (currentIndex === dataSource.length - 1) {\n        return this.setState({\n          disabled: true\n        });\n      } else if (currentIndex === dataSource.length - 2) {\n        // show last card with renderEmpty() component behind it\n        return setTimeout(() => {\n          this.setState({\n            selectedItem: dataSource[currentIndex + 1]\n          });\n          setTimeout(() => {\n            this.setState({\n              lastCard: true\n            });\n          }, 350);\n        }, 50);\n      }\n    }\n\n    let nextIndexes = this.findNextIndexes(currentIndex);\n    setTimeout(() => {\n      this.setState({\n        selectedItem: this.props.dataSource[nextIndexes[0]]\n      });\n      setTimeout(() => {\n        this.setState({\n          selectedItem2: this.props.dataSource[nextIndexes[1]]\n        });\n      }, 350);\n    }, 50);\n  }\n\n  swipeRight() {\n    if (this.props.onSwiping) this.props.onSwiping(\"right\");\n    setTimeout(() => {\n      Animated.timing(this.state.fadeAnim, { toValue: 1 }).start();\n      Animated.spring(this.state.enter, { toValue: 1, friction: 7 }).start();\n      this.selectNext();\n      Animated.decay(this.state.pan, {\n        velocity: { x: 8, y: 1 },\n        deceleration: 0.98\n      }).start(this._resetState.bind(this));\n    }, 300);\n  }\n\n  swipeLeft() {\n    if (this.props.onSwiping) this.props.onSwiping(\"left\");\n    setTimeout(() => {\n      Animated.timing(this.state.fadeAnim, { toValue: 1 }).start();\n      Animated.spring(this.state.enter, { toValue: 1, friction: 7 }).start();\n      this.selectNext();\n      Animated.decay(this.state.pan, {\n        velocity: { x: -8, y: 1 },\n        deceleration: 0.98\n      }).start(this._resetState.bind(this));\n    }, 300);\n  }\n\n  componentWillMount() {\n    this._panResponder = PanResponder.create({\n      onMoveShouldSetResponderCapture: () => true,\n      onMoveShouldSetPanResponderCapture: (evt, gestureState) => {\n        return Math.abs(gestureState.dx) > 5;\n      },\n\n      onPanResponderGrant: (e, gestureState) => {\n        this.state.pan.setOffset({\n          x: this.state.pan.x._value,\n          y: this.state.pan.y._value\n        });\n        this.state.pan.setValue({ x: 0, y: 0 });\n      },\n\n      onPanResponderMove: (e, gestureState) => {\n        if (gestureState.dx > 20) {\n          if (this.props.onSwiping)\n            this.props.onSwiping(\"right\", gestureState.dx);\n        } else if (gestureState.dx < -20) {\n          if (this.props.onSwiping)\n            this.props.onSwiping(\"left\", gestureState.dx);\n        }\n        let val = Math.abs(gestureState.dx * 0.0013);\n        let opa = Math.abs(gestureState.dx * 0.0022);\n        if (val > 0.2) {\n          val = 0.2;\n        }\n        Animated.timing(this.state.fadeAnim, { toValue: 0.8 + val }).start();\n        Animated.spring(this.state.enter, {\n          toValue: 0.8 + val,\n          friction: 7\n        }).start();\n        Animated.event([null, { dx: this.state.pan.x }])(e, gestureState);\n      },\n\n      onPanResponderRelease: (e, { vx, vy }) => {\n        if (this.props.onSwiping) this.props.onSwiping(null);\n        var velocity;\n\n        if (vx >= 0) {\n          velocity = clamp(vx, 4.5, 10);\n        } else if (vx < 0) {\n          velocity = clamp(vx * -1, 4.5, 10) * -1;\n        }\n\n        if (Math.abs(this.state.pan.x._value) > SWIPE_THRESHOLD) {\n          if (velocity > 0) {\n            this.props.onSwipeRight\n              ? this.props.onSwipeRight(this.state.selectedItem)\n              : undefined;\n            this.selectNext();\n          } else {\n            this.props.onSwipeLeft\n              ? this.props.onSwipeLeft(this.state.selectedItem)\n              : undefined;\n            this.selectNext();\n          }\n\n          Animated.decay(this.state.pan, {\n            velocity: { x: velocity, y: vy },\n            deceleration: 0.98\n          }).start(this._resetState.bind(this));\n        } else {\n          Animated.spring(this.state.pan, {\n            toValue: { x: 0, y: 0 },\n            friction: 4\n          }).start();\n        }\n      }\n    });\n  }\n\n  _resetState() {\n    this.state.pan.setValue({ x: 0, y: 0 });\n    this.state.enter.setValue(0.8);\n    this.state.fadeAnim.setValue(0.8);\n    this.setState({\n      card1Top: !this.state.card1Top,\n      card2Top: !this.state.card2Top\n    });\n    if (this.props.onSwiping) this.props.onSwiping(null);\n  }\n\n  getCardStyles() {\n    let { pan, pan2, enter } = this.state;\n\n    let [translateX, translateY] = [pan.x, pan.y];\n    // let [translateX, translateY] = [pan2.x, pan2.y];\n\n    let rotate = pan.x.interpolate({\n      inputRange: [-700, 0, 700],\n      outputRange: [\"-10deg\", \"0deg\", \"10deg\"]\n    });\n\n    let opacity = pan.x.interpolate({\n      inputRange: [-320, 0, 320],\n      outputRange: [0.9, 1, 0.9]\n    });\n    let scale = enter;\n\n    let animatedCardStyles = {\n      transform: [{ translateX }, { translateY }, { rotate }],\n      opacity\n    };\n    let animatedCardStyles2 = { transform: [{ scale }] };\n\n    return [animatedCardStyles, animatedCardStyles2];\n  }\n\n  render() {\n    if (this.state.disabled) {\n      // disable swiping and renderEmpty\n      return (\n        <View\n          ref={c => (this._root = c)}\n          style={{ position: \"relative\", flexDirection: \"column\" }}\n        >\n          {\n            <View>\n              {this.props.renderEmpty && this.props.renderEmpty()}\n            </View>\n          }\n        </View>\n      );\n    } else if (this.state.lastCard) {\n      // display renderEmpty underneath last viable card\n      return (\n        <View\n          ref={c => (this._root = c)}\n          style={{ position: \"relative\", flexDirection: \"column\" }}\n        >\n          {this.state.selectedItem === undefined\n            ? <View />\n            : <View>\n                <Animated.View\n                  style={[\n                    this.getCardStyles()[1],\n                    this.getInitialStyle().topCard,\n                    { opacity: this.state.fadeAnim }\n                  ]}\n                  {...this._panResponder.panHandlers}\n                >\n                  {this.props.renderEmpty && this.props.renderEmpty()}\n                </Animated.View>\n                <Animated.View\n                  style={[\n                    this.getCardStyles()[0],\n                    this.getInitialStyle().topCard\n                  ]}\n                  {...this._panResponder.panHandlers}\n                >\n                  {this.props.renderItem(this.state.selectedItem)}\n                </Animated.View>\n              </View>}\n        </View>\n      );\n    } else {\n      return (\n        <View\n          ref={c => (this._root = c)}\n          style={{ position: \"relative\", flexDirection: \"column\" }}\n        >\n          {this.state.selectedItem === undefined\n            ? <View />\n            : <View>\n                <Animated.View\n                  style={[\n                    this.getCardStyles()[1],\n                    this.getInitialStyle().topCard,\n                    { opacity: this.state.fadeAnim }\n                  ]}\n                  {...this._panResponder.panHandlers}\n                >\n                  {this.props.renderBottom\n                    ? this.props.renderBottom(this.state.selectedItem2)\n                    : this.props.renderItem(this.state.selectedItem2)}\n                </Animated.View>\n                <Animated.View\n                  style={[\n                    this.getCardStyles()[0],\n                    this.getInitialStyle().topCard\n                  ]}\n                  {...this._panResponder.panHandlers}\n                >\n                  {this.props.renderTop\n                    ? this.props.renderTop(this.state.selectedItem)\n                    : this.props.renderItem(this.state.selectedItem)}\n                </Animated.View>\n              </View>}\n        </View>\n      );\n    }\n  }\n}\n\nDeckSwiper.propTypes = {\n  ...ViewPropTypes,\n  style: React.PropTypes.object,\n  dataSource: React.PropTypes.array\n};\n\nconst StyledDeckSwiper = connectStyle(\n  \"NativeBase.DeckSwiper\",\n  {},\n  mapPropsToStyleNames\n)(DeckSwiper);\n\nexport { StyledDeckSwiper as DeckSwiper };\n"]},"metadata":{},"sourceType":"script"}